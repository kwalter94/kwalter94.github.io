<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="I Hate File System Based Routing" /><meta property="og:locale" content="en" /><meta name="description" content="I have been using Sveltekit on a number of projects for a while now. Whilst I like some of its ideas, there is one thing that just undoes the whole thing for me. File system based routing, it sounds like a good idea but in practice it’s annoying as f%$k on any moderately complex application. It pretty much breaks how I work with any of my text editors of choice (neovim / vscode)." /><meta property="og:description" content="I have been using Sveltekit on a number of projects for a while now. Whilst I like some of its ideas, there is one thing that just undoes the whole thing for me. File system based routing, it sounds like a good idea but in practice it’s annoying as f%$k on any moderately complex application. It pretty much breaks how I work with any of my text editors of choice (neovim / vscode)." /><link rel="canonical" href="/posts/I-Hate-File-System-Based-Routing/" /><meta property="og:url" content="/posts/I-Hate-File-System-Based-Routing/" /><meta property="og:site_name" content="ntumbuka[sic]" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2023-07-30T23:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="I Hate File System Based Routing" /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-07-30T23:04:31+02:00","datePublished":"2023-07-30T23:00:00+02:00","description":"I have been using Sveltekit on a number of projects for a while now. Whilst I like some of its ideas, there is one thing that just undoes the whole thing for me. File system based routing, it sounds like a good idea but in practice it’s annoying as f%$k on any moderately complex application. It pretty much breaks how I work with any of my text editors of choice (neovim / vscode).","headline":"I Hate File System Based Routing","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/I-Hate-File-System-Based-Routing/"},"url":"/posts/I-Hate-File-System-Based-Routing/"}</script><title>I Hate File System Based Routing | ntumbuka[sic]</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ntumbuka[sic]"><meta name="application-name" content="ntumbuka[sic]"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">ntumbuka[sic]</a></div><div class="site-subtitle font-italic">Sine ntumbuka[sic]</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/kwalter94" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['walterkaunda','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/walter-kaunda-6972bb129/" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>I Hate File System Based Routing</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>I Hate File System Based Routing</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1690750800" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 30, 2023 </em> </span> <span> Updated <em class="" data-ts="1690751071" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jul 30, 2023 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/kwalter94/">Walter Kaunda</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="491 words"> <em>2 min</em> read</span></div></div></div><div class="post-content"><p>I have been using Sveltekit on a number of projects for a while now. Whilst I like some of its ideas, there is one thing that just undoes the whole thing for me. File system based routing, it sounds like a good idea but in practice it’s annoying as f%$k on any moderately complex application. It pretty much breaks how I work with any of my text editors of choice (neovim / vscode).</p><p>First problem, tabs are rendered less useful. When you have 10 files open that are all named <code class="language-plaintext highlighter-rouge">+page.svelte</code> in tabs, it becomes harder to know which tab to go to for a specific file. Yes, some text editors include some information about the directory containing the file but it’s still a long way from improving the user experience. In the absence of this file system routing nonsense, finding the file with the product edit logic is as simple as just scanning for for a tab with a label like <code class="language-plaintext highlighter-rouge">EditProduct.svelte</code>, not trying to make sense of labels that look something like <code class="language-plaintext highlighter-rouge">+page.svelte (../[id])</code>.</p><p>Secondly and the biggest deal breaker for me, it breaks fuzzy file search. Jumping between files in a text editor for me involves using a fuzzy file search tool like FZF or vscode’s *<Ctrl-P>* thingy. I type the name of the file I want and hit enter to jump to it. I find that workflow super fast, I have been using it for years. I don't need to reach for a mouse and start clicking through menus and what not. No need to click through some file system tree view to search for some file. With file system based routing, fuzzy finding files becomes 10 times harder. Searches become less precise since you mostly match directories containing a shit ton of files and directories. Fuzzy finding files becomes search for what you want then scroll through a list containing a bunch of files you are not interested in. I am having to unlearn how I use a text editor for the sake of Sveltekit.</Ctrl-P></p><p>A work around for these problems involves pushing as much logic out of Sveltekit’s routes folder to a component hierarchy outside. Basically, your <code class="language-plaintext highlighter-rouge">+page.svelte</code> just imports a component from elsewhere containing all the logic. The component’s file can have a nice name that’s easy to remember (e.g. <code class="language-plaintext highlighter-rouge">pages/EditProduct.svelte</code>). However, by design Sveltekit pulls you to have a good amount of pages’ logic in your routes directory. The logic needed to do stuff in your component is normally spread out in a number of files (<code class="language-plaintext highlighter-rouge">+page.svelte</code>, <code class="language-plaintext highlighter-rouge">+page.js</code>, <code class="language-plaintext highlighter-rouge">+page.server.js</code>, <code class="language-plaintext highlighter-rouge">+layout.server.js</code>, etc). Ideally, you don’t want your logic spread all over so naturally you gravite towards having a big part of pages’ logic in <code class="language-plaintext highlighter-rouge">+page.svelte</code>. Frameworks are supposed to make work easier. In this case, I am needing to find work arounds in order to make working with the framework easier. In my opinion, this is a sure sign that something is awfully wrong.</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/programming/'>Programming</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/programming/" class="post-tag no-text-decoration" >programming</a> <a href="/tags/javascript/" class="post-tag no-text-decoration" >javascript</a> <a href="/tags/sveltekit/" class="post-tag no-text-decoration" >sveltekit</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=I%20Hate%20File%20System%20Based%20Routing%20-%20ntumbuka[sic]&url=%2Fposts%2FI-Hate-File-System-Based-Routing%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=I%20Hate%20File%20System%20Based%20Routing%20-%20ntumbuka[sic]&u=%2Fposts%2FI-Hate-File-System-Based-Routing%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2FI-Hate-File-System-Based-Routing%2F&text=I%20Hate%20File%20System%20Based%20Routing%20-%20ntumbuka[sic]" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kugwira-mfiti-in-a-serverless-database/">Kugwidwa Ufiti in a Serverless Database</a><li><a href="/posts/dont-settle-too-early/">Don't Settle Too Early [DRAFT]</a><li><a href="/posts/my-first-aoc-experience/">My First AOC Experience [DRAFT]</a><li><a href="/posts/How-to-properly-wait-for-your-dependencies-in-docker-compose/">How to Wait for Dependencies in Docker Compose</a><li><a href="/posts/FAM-On-That-Crystal-Meth/">FAM On That Crystal Meth</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/data-engineering/">data engineering</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/crystal/">crystal</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/c/">c</a> <a class="post-tag" href="/tags/couchbase/">couchbase</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/A-naive-approach-to-monitoring-datasets/"><div class="card-body"> <em class="small" data-ts="1684857600" data-df="ll" > May 23, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>A Naive Approach to Monitoring Datasets [Draft]</h3><div class="text-muted small"><p> For some time now, I have had this problem at my usual place of work to do with monitoring of some data streams. The feeds are mostly set up as webhooks that are provided to other teams within the ...</p></div></div></a></div><div class="card"> <a href="/posts/A-Case-For-File-Based-Workflows/"><div class="card-body"> <em class="small" data-ts="1697738400" data-df="ll" > Oct 19, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>A Case for Paper Based Workflows</h3><div class="text-muted small"><p> A common thread I find in most software developers’ product pitches in Malawi (Africa as a whole too to some extent) revolves around replacing paper based workflows with almost one hundred percent ...</p></div></div></a></div><div class="card"> <a href="/posts/dont-settle-too-early/"><div class="card-body"> <em class="small" data-ts="1699466400" data-df="ll" > Nov 8, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Don't Settle Too Early [DRAFT]</h3><div class="text-muted small"><p> A couple of days ago there was a debate on programming languages (technology in general). in one of our local developer groups. The initial proposition that was made was kind of something like PHP ...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/FAM-On-That-Crystal-Meth/" class="btn btn-outline-primary" prompt="Older"><p>FAM On That Crystal Meth</p></a> <a href="/posts/A-Case-For-File-Based-Workflows/" class="btn btn-outline-primary" prompt="Newer"><p>A Case for Paper Based Workflows</p></a></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/data-engineering/">data engineering</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/crystal/">crystal</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/c/">c</a> <a class="post-tag" href="/tags/couchbase/">couchbase</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/kwalter94/">Walter Kaunda</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
