<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.3" /><meta property="og:title" content="Kugwidwa Ufiti in a Serverless Database" /><meta property="og:locale" content="en" /><meta name="description" content="In late 2022, we started exploring Snowflake as an alternative to our existing data warehouse solution at my usual place of work. Before then we were a strictly Microsoft SQL server house. Sequel Server was adopted in the first place because the organisation already had a lot of expertise around it. Adopting it as a data warehouse was rather natural. It did serve the organisation quite well for a number of years. Overtime the number of users of the warehouse grew. At the same time, we were also producing more data than before. Total number of datasets was closing in to over a thousand and some of these datasets grew quite large, hitting hundreds of millions of rows." /><meta property="og:description" content="In late 2022, we started exploring Snowflake as an alternative to our existing data warehouse solution at my usual place of work. Before then we were a strictly Microsoft SQL server house. Sequel Server was adopted in the first place because the organisation already had a lot of expertise around it. Adopting it as a data warehouse was rather natural. It did serve the organisation quite well for a number of years. Overtime the number of users of the warehouse grew. At the same time, we were also producing more data than before. Total number of datasets was closing in to over a thousand and some of these datasets grew quite large, hitting hundreds of millions of rows." /><link rel="canonical" href="/posts/kugwira-mfiti-in-a-serverless-database/" /><meta property="og:url" content="/posts/kugwira-mfiti-in-a-serverless-database/" /><meta property="og:site_name" content="ntumbuka[sic]" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2024-05-21T18:00:00+02:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Kugwidwa Ufiti in a Serverless Database" /><meta name="twitter:site" content="@" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2024-05-22T16:56:43+02:00","datePublished":"2024-05-21T18:00:00+02:00","description":"In late 2022, we started exploring Snowflake as an alternative to our existing data warehouse solution at my usual place of work. Before then we were a strictly Microsoft SQL server house. Sequel Server was adopted in the first place because the organisation already had a lot of expertise around it. Adopting it as a data warehouse was rather natural. It did serve the organisation quite well for a number of years. Overtime the number of users of the warehouse grew. At the same time, we were also producing more data than before. Total number of datasets was closing in to over a thousand and some of these datasets grew quite large, hitting hundreds of millions of rows.","headline":"Kugwidwa Ufiti in a Serverless Database","mainEntityOfPage":{"@type":"WebPage","@id":"/posts/kugwira-mfiti-in-a-serverless-database/"},"url":"/posts/kugwira-mfiti-in-a-serverless-database/"}</script><title>Kugwidwa Ufiti in a Serverless Database | ntumbuka[sic]</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="ntumbuka[sic]"><meta name="application-name" content="ntumbuka[sic]"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener('change', () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.notify(); } /* flipMode() */ } /* ModeToggle */ const modeToggle = new ModeToggle(); </script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="/assets/avatar.png" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">ntumbuka[sic]</a></div><div class="site-subtitle font-italic">Sine ntumbuka[sic]</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/kwalter94" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="javascript:location.href = 'mailto:' + ['walterkaunda','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://www.linkedin.com/in/walter-kaunda-6972bb129/" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Kugwidwa Ufiti in a Serverless Database</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Kugwidwa Ufiti in a Serverless Database</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1716307200" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 21, 2024 </em> </span> <span> Updated <em class="" data-ts="1716389803" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 22, 2024 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://github.com/kwalter94/">Walter Kaunda</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1845 words"> <em>10 min</em> read</span></div></div></div><div class="post-content"><p>In late 2022, we started exploring Snowflake as an alternative to our existing data warehouse solution at my usual place of work. Before then we were a strictly Microsoft SQL server house. Sequel Server was adopted in the first place because the organisation already had a lot of expertise around it. Adopting it as a data warehouse was rather natural. It did serve the organisation quite well for a number of years. Overtime the number of users of the warehouse grew. At the same time, we were also producing more data than before. Total number of datasets was closing in to over a thousand and some of these datasets grew quite large, hitting hundreds of millions of rows.</p><p>Some of the problems we experienced included tables locking up because of data pipelines trying to update the tables, whilst a number of users were trying to access those same tables at the same time. Also the server would just crawl to a halt because of too much, that was too heavy, happening. We needed a change… From our exploration we ended up landing on <a href="https://snowflake.org">Snowflake</a>. Snowflake could quite easily address all the problems that we had. We did eventually migrate to it and I can tell you that performance hasn’t been a problem at all, again. Snowflake is blazingly fast for analytics. We are able to do far more than we were able to do on SQL Server with very little effort. The closest we had to performance problems was this one time when we found ourselves executing a lot of queries (thousands) at the same time, so Snowflake had to queue up some of these queries. The fix was rather easy; with a click of a button we were able to scale up our warehouse to handle the load.</p><p>Snowflake did solve our performance problems but it did come with its own cruft. The costs of running Snowflake were rapidly rising by the day with more and more adoption within the organisation. This increase in costs did not necessarily come from pushing Snowflake to the max but rather inefficient use of it. We basically just did a lift and shift operation of our work and how we worked on SQL Server to Snowflake. That ended up unnecessarily costing us heavilly.</p><h2 id="moving-to-a-serverless-database-requires-a-change-of-behaviour"><span class="mr-2">Moving to a Serverless Database requires a Change of Behaviour</span><a href="#moving-to-a-serverless-database-requires-a-change-of-behaviour" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><blockquote><p>“Modern solutions require modern problems” (Anonymous Dude on the Internet)</p></blockquote><p>Snowflake is a serverless data warehouse. There is no server for us to manage in a sense. Snowflake just gives us a choice on how much compute we need. We don’t need to be experts on the internal workings of Snowflake like we were required with SQL Server. We don’t need to tune servers to get the most out of them. I haven’t even thought about where to put an index in over a year now. It’s brilliant, however there is a catch… Costs in serverless don’t work the same as they do in an environment where we manage our own servers.</p><p>When we pay for a server on <a href="https://cloudafrica.net">Cloud Africa</a> for example, what we get is exclusive ownership of the server for the term of the contract we have gotten into. Serverless, on the other hand, doesn’t work quite like this. We pay for compute time, not a server. In other words, we kind of pay for how much we do. When we own a server, we can do as we please, so long as the server can handle it. On serverless, we have to cough up more money to do as we please. And those costs do rise rapidly.</p><p>On Snowflake, we buy credits which are time-bound. Credits can only be used within a given time period. Credits translate to compute hours. One credit is consumed for an hour of compute on the smallest warehouse possible (instead of servers you think of warehouses on Snowflake). The bigger the warehouse, the more credits consumed per hour. Here is the catch, one hour of compute time does not necessarily mean that you have done an hour of work. That just means the warehouse was up/available for an hour. We can do more than an hour of work (multi-tasking) in that time or less. We can end up paying for an hour of compute when we have actually performed less than a minute of work and this was what was happening to us.</p><p>Here is what happens… When you send a query to Snowflake, a warehouse powers up to handle your query. When done with the query, the warehouse doesn’t power down immediately. It waits for some time in case more queries come in. We had this timeout set to 10 minutes initially. The warehouse would then most times wait for a number of minutes for a query that may or may not come, and it when it does, the 10 minutes gets extended. In effect, we would have a warehouse up hours on end, doing nothing. We were paying money to literally do nothing!!! We did eventually come to reducing the timeout time to the minimum possible 1 minute. This improved things for a while but time still did catch up with us again.</p><p>The root cause of the problem we had stemmed from the fact that we did not change our behaviour moving from SQL server to Snowflake. When we were working on SQL server, we would schedule our pipelines to run whenever without thinking about it too much. For example, I would come in and configure my pipeline to run every hour starting from now (time is 18:23 now). Somebody else comes in schedules their pipeline to run every 30 minutes starting from 18:31 and so on. Scale this behaviour to dozens of individuals, it quickly becomes a problem (we have data engineers, analysts, and scientists all scheduling their ETL and analytical pipelines). Soon, we find ourselves in a situation where the warehouse doesn’t get to power down. On average, we find that each of these individuals is doing very little work. Maybe just a query that checks if there is new data. It takes less than a second to run but in effect costed us a minute of compute. To make matters worse we had people building APIs and using Snowflake as their database. There are two problems with APIs: 1) their traffic is not patterned (akin to the scheduling of pipelines we were doing) and 2) healthchecks (these can come in every second).</p><p>Our problem was not serverless per se, our problem was that we operated in a serverless environment as if we were in a self-managed environment. In a self-managed environment we can afford to be wasteful because we don’t really need to think about costs relative to what we were doing. What we were doing only mattered when we tripped on each other. I am slowing down the database because of a heavy query that I am running for example.</p><h2 id="measuring-userrolequery-impact-on-a-serverless-database"><span class="mr-2">Measuring User/Role/Query Impact on a Serverless database</span><a href="#measuring-userrolequery-impact-on-a-serverless-database" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2><p>When we figured out that our behaviour was the problem, the next step was to be able to detect when someone was behaving like a savage. For this we ended up using tools we already had in our utility belt but we ended up applying them differently. Again as the behaviour thing, we couldn’t simply carry what we knew from SQL server over to this.</p><p>If something was going wrong on SQL server, we would look for the slowest queries or look for a query that was running too many times in a day. Looking at these two things independently worked on SQL Server but it turned out to be useless on Snowflake for the most part. A query that runs continuosly for 3 hours in a day could end up costing us less than a query that runs for a total of 30 seconds in a day. A query that runs once a day could cost us more than a query that runs 10,000 times in a day. The runtime and scheduling of a query both mattered. It was never an either - or situation. Sometimes our biggest cost would come from the 3 hour query and sometimes it could be the query that runs 10,000 times depending on how it was scheduled. A query could run 10,000 times within the same minute. The cost of that is less than that of a query that runs continuosly for 5 minutes. At the same time if the 10,000 runs are spread out throughout a day, the cost would tilt the other way round. We needed a measure that could capture both of these situations. The measure also had to be applicable to various elements like roles, users, and queries.</p><p>We ended up on a measure we called relative cost (for lack of a better name - English is not our first language, Chidzungu chinabwera pa boti ichi). It combines both the number of times a query is executed and how long the query takes on each run. The scale of this measure is roughly between 0 and 1 (it can exceed 1 but we don’t care about that excess - it adds no more meaning). The closer to 0 the value is then the lower the impact on the data warehouse and the closer to 1 it is, then the user, role, or query in question kept the warehouse up for about 100% of the time.</p><p>The logic behind the measure goes something like this:</p><ul><li>Walk every minute of an hour<li>For each minute check if there is a query started by a particular user or role<li>Sum up the each of these occurrences and total execution time<li>Divide the total by 60 (60 minutes in an hour)<li>NOTE: If a query executes in every minute for less than a second then after the summing up you end up with a value that’s about 1. Same as if you only have a single query that runs for the entire hour.</ul><p>The query we were running for this looks something like:</p><div class="language-sql highlighter-rouge"><div class="code-header"> <span data-label-text="Sql"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
</pre><td class="rouge-code"><pre><span class="k">WITH</span> <span class="n">roles_relative_cost</span> <span class="p">(</span>
  <span class="k">SELECT</span>
    <span class="n">warehouse_name</span><span class="p">,</span>
    <span class="n">role_name</span><span class="p">,</span>
    <span class="n">user_name</span><span class="p">,</span>
    <span class="n">TO_CHAR</span><span class="p">(</span><span class="n">start_time</span><span class="p">,</span> <span class="s1">'YYYY-MM-DD HH:MI:00'</span><span class="p">)::</span><span class="nb">DATETIME</span> <span class="k">AS</span> <span class="k">minute</span><span class="p">,</span>
    <span class="p">(</span><span class="n">DATEDIFF</span><span class="p">(</span><span class="n">MINUTES</span><span class="p">,</span> <span class="k">MIN</span><span class="p">(</span><span class="n">start_time</span><span class="p">),</span> <span class="k">MAX</span><span class="p">(</span><span class="n">end_time</span><span class="p">))</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60</span> <span class="k">AS</span> <span class="n">relative_cost</span><span class="p">,</span>
    <span class="k">COUNT</span><span class="p">(</span><span class="n">query_hash</span><span class="p">)</span> <span class="k">AS</span> <span class="n">num_queries</span><span class="p">,</span>
    <span class="k">SUM</span><span class="p">(</span><span class="n">execution_time</span><span class="p">)</span> <span class="k">AS</span> <span class="n">execution_time</span>
  <span class="k">FROM</span> <span class="n">snowflake</span><span class="p">.</span><span class="n">account_usage</span><span class="p">.</span><span class="n">query_history</span>
  <span class="k">WHERE</span>
    <span class="n">start_time</span> <span class="k">BETWEEN</span> <span class="n">DATEADD</span><span class="p">(</span><span class="k">DAY</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="k">CURRENT_DATE</span><span class="p">)</span> <span class="k">AND</span> <span class="k">CURRENT_DATE</span>
  <span class="k">GROUP</span> <span class="k">BY</span> <span class="k">ALL</span>
<span class="p">)</span>
<span class="k">SELECT</span>
  <span class="n">TO_CHAR</span><span class="p">(</span><span class="k">minute</span><span class="p">,</span> <span class="s1">'YYYY-MM-DD'</span><span class="p">)::</span><span class="nb">DATE</span> <span class="k">AS</span> <span class="nb">date</span><span class="p">,</span>
  <span class="n">COALESCE</span><span class="p">(</span><span class="n">warehouse</span><span class="p">,</span> <span class="s1">'Unknown'</span><span class="p">)</span> <span class="k">AS</span> <span class="n">warehouse_name</span><span class="p">,</span>
  <span class="n">role_name</span><span class="p">,</span>
  <span class="n">user_name</span><span class="p">,</span>
  <span class="k">SUM</span><span class="p">(</span><span class="n">relative_cost</span><span class="p">)</span> <span class="o">/</span> <span class="mi">24</span> <span class="k">AS</span> <span class="n">relative_cost</span><span class="p">,</span>
  <span class="k">SUM</span><span class="p">(</span><span class="n">num_queries</span><span class="p">)</span> <span class="k">AS</span> <span class="n">num_queries</span><span class="p">,</span>
  <span class="k">SUM</span><span class="p">(</span><span class="n">execution_time</span><span class="p">)</span> <span class="o">/</span> <span class="mi">60000</span> <span class="k">AS</span> <span class="n">execution_time</span> <span class="c1">-- Express in minutes</span>
<span class="k">FROM</span> <span class="n">roles_relative_cost</span>
<span class="k">GROUP</span> <span class="k">BY</span> <span class="k">ALL</span>
<span class="k">ORDER</span> <span class="k">BY</span> <span class="mi">5</span> <span class="k">DESC</span><span class="p">,</span> <span class="mi">6</span> <span class="k">DESC</span><span class="p">,</span> <span class="mi">4</span> <span class="k">DESC</span><span class="p">;</span>
</pre></table></code></div></div><p>The query above gives each role/user combo’s relative cost. Onse with a cost above 0.5 ndi athakati. By multiplying the cost to 24 we can get a rough estimate of how long they kept the warehouse on. We have this query and a couple of variations running in <a href="https://n8n.io">n8n</a> every morning to produce a reports showing the most expensive queries and other information.</p><p>Jah man…</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/databases/'>Databases</a>, <a href='/categories/data-engineering/'>Data Engineering</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/snowflake/" class="post-tag no-text-decoration" >snowflake</a> <a href="/tags/databases/" class="post-tag no-text-decoration" >databases</a> <a href="/tags/data-engineering/" class="post-tag no-text-decoration" >data engineering</a> <a href="/tags/data-warehouses/" class="post-tag no-text-decoration" >data warehouses</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Kugwidwa%20Ufiti%20in%20a%20Serverless%20Database%20-%20ntumbuka[sic]&url=%2Fposts%2Fkugwira-mfiti-in-a-serverless-database%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Kugwidwa%20Ufiti%20in%20a%20Serverless%20Database%20-%20ntumbuka[sic]&u=%2Fposts%2Fkugwira-mfiti-in-a-serverless-database%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=%2Fposts%2Fkugwira-mfiti-in-a-serverless-database%2F&text=Kugwidwa%20Ufiti%20in%20a%20Serverless%20Database%20-%20ntumbuka[sic]" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/kugwira-mfiti-in-a-serverless-database/">Kugwidwa Ufiti in a Serverless Database</a><li><a href="/posts/dont-settle-too-early/">Don't Settle Too Early [DRAFT]</a><li><a href="/posts/my-first-aoc-experience/">My First AOC Experience [DRAFT]</a><li><a href="/posts/How-to-properly-wait-for-your-dependencies-in-docker-compose/">How to Wait for Dependencies in Docker Compose</a><li><a href="/posts/FAM-On-That-Crystal-Meth/">FAM On That Crystal Meth</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/data-engineering/">data engineering</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/crystal/">crystal</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/c/">c</a> <a class="post-tag" href="/tags/couchbase/">couchbase</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"><div class="panel-heading pl-3 pt-2 mb-2">Contents</div><nav id="toc"></nav></div><script src="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.js"></script></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/A-naive-approach-to-monitoring-datasets/"><div class="card-body"> <em class="small" data-ts="1684857600" data-df="ll" > May 23, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>A Naive Approach to Monitoring Datasets [Draft]</h3><div class="text-muted small"><p> For some time now, I have had this problem at my usual place of work to do with monitoring of some data streams. The feeds are mostly set up as webhooks that are provided to other teams within the ...</p></div></div></a></div><div class="card"> <a href="/posts/Of-streams-in-ruby-and-python/"><div class="card-body"> <em class="small" data-ts="1660982400" data-df="ll" > Aug 20, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Of Streams (Enumerators and Generators) in Ruby and Python</h3><div class="text-muted small"><p> In a past life I was once tasked with coming up with a tool for extracting and transforming datasets of various sizes into datasets in a different format. The source datasets could hit sizes of up ...</p></div></div></a></div><div class="card"> <a href="/posts/you-cant-eat-your-pie-and-have-it-too/"><div class="card-body"> <em class="small" data-ts="1653418800" data-df="ll" > May 24, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>You Can't Eat Your Pie And Have it Too</h3><div class="text-muted small"><p> Get your CAP on and take a walk with me If you have worked long enough with databases or distributed systems, chances are that you are familiar with the CAP theorem. CAP is short for the following...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/my-first-aoc-experience/" class="btn btn-outline-primary" prompt="Older"><p>My First AOC Experience [DRAFT]</p></a><div class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></div></div></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/programming/">programming</a> <a class="post-tag" href="/tags/data-engineering/">data engineering</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/crystal/">crystal</a> <a class="post-tag" href="/tags/databases/">databases</a> <a class="post-tag" href="/tags/docker/">docker</a> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/backend/">backend</a> <a class="post-tag" href="/tags/c/">c</a> <a class="post-tag" href="/tags/couchbase/">couchbase</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://github.com/kwalter94/">Walter Kaunda</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/unregister.js"></script>
